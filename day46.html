<html>
  <head>
    <meta charset="UTF-8" />
    <title>후위식 연산 출력결과</title>
  </head>
  <body>
    <script>
      function solution(s) {
        // 후위 연산식이 주어지면 연산한 결과를 출력
        // s를 stack에 쌓으면서
        // 연산자가 나오면 가장 최근에 들어간 두 숫자로 계산한다
        let stack = [];
        let answer = 0;
        for (let x of s) {
          if (!isNaN(x)) {
            stack.push(Number(x));
          } else {
            let first = stack.pop();
            let second = stack.pop();
            if (x === '+') stack.push(second + first);
            else if (x === '-') stack.push(second - first);
            else if (x === '*') stack.push(second * first);
            else if (x === '/') stack.push(second / first);
            // stack.push(eval(`${second}${x}${first`));
            // eval() 문자로 표현된 JavaScript 코드를 실행하는 함수
            // eval()은 인자로 받은 코드를 caller의 권한으로 수행하는 위험한 함수입니다.
            // 악의적인 영향을 받았을 수 있는 문자열을 eval()로 실행한다면,
            // 당신의 웹페이지나 확장 프로그램의 권한으로 사용자의 기기에서 악의적인 코드를 수행하는 결과를 초래할 수 있습니다.
            // 또한, 제3자 코드가 eval()이 호출된 위치의 스코프를 볼 수 있으며,
            // 이를 이용해 비슷한 함수인 Function으로는 실현할 수 없는 공격이 가능
            // JS 인터프리터를 사용해야 하기 때문에 다른 대안들보다 느림

            // 문자열 연산자를 변경할 방법이 떠오르지 않아 검색해서 eval 풀어봤는데
            // 강의의 경우에는
            // isNaN으로 연산자와 숫자를 구분했음 => 나는 if(Number(x))로 숫자 여부를 확인함

            // 그리고 if 문으로 연산자를 나누어서 계산함 => 처음에는 이렇게 구현했다가 강의를 보기 전에
            // 코드가 지저분한 거 같아 eval을 검색으로 풀어봤었음
          }
        }
        answer = stack.pop();
        return answer;
      }

      let str = '352+*9-';
      console.log(solution(str));
    </script>
  </body>
</html>
